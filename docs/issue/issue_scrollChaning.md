2026-02-06
소스코드 수정하지말고 현 프로젝트에서 개선안 이야기하자.

UI 개선
1. @client/src/ui-components/Autocomplete/Autocomplete.tsx 모바일화면에서 3개만 보여주고 나머지는 스크롤영역 처리가 필요한데
현재 스와이프로 스크롤하면 막 둥둥떠다니면서 메인페이지, 모달, 모달안에 Autocomplete 에서 표시되는 옵션 리스트. 3가지가 위아래로 중구난방으로 스크롤되고 있어. 어떻게 처리하는게 좋을까?

현 프로젝트의 Autocomplete 컴포넌트에서 발생하는 모바일 스크롤 이슈는 중첩된 스크롤 영역(Body, Modal, Autocomplete List) 간의 '스크롤 연쇄(Scroll Chaining)' 및 '스크롤 잠금(Scroll Lock)' 부재로 인해 발생하는 전형적인 문제군요.
소스코드를 수정하기에 앞서, MUI 7+ 환경에서 이를 해결하고 UX를 개선할 수 있는 구체적인 제안을 드립니다.
1. 기술적 개선안: 스크롤 영역 제어 및 고정
현재 메인 페이지, 모달, 옵션 리스트가 함께 움직이는 현상을 막기 위해 다음 전략을 적용하는 것이 좋습니다.
Listbox 높이 제한 및 내부 스크롤 강제:
MUI Autocomplete의 ListboxProps를 사용하여 최대 높이를 제한합니다. 3개 정도의 아이템만 보이게 하려면 아이템 당 높이를 계산하여 max-height를 설정하고 overflow-y: auto를 적용해야 합니다.
제안: sx 속성을 통해 모바일 환경(theme.breakpoints.down('sm'))에서 maxHeight: '150px'(약 3개 항목 분량) 정도로 고정합니다.
스크롤 잠금 (Scroll Lock):
Autocomplete의 옵션 리스트(Popper)가 열릴 때, 배경(Modal이나 Body)의 스크롤을 일시적으로 막아야 합니다.
MUI의 Popper나 Modal은 기본적으로 스크롤 락 기능을 제공하지만, 중첩된 경우에는 제대로 작동하지 않을 수 있습니다. disablePortal 옵션을 조정하거나, 리스트가 열릴 때 body에 overflow: hidden을 직접 제어하는 로직이 필요할 수 있습니다.
Touch-action 관리:
CSS touch-action: pan-y를 옵션 리스트에 명시적으로 설정하여, 스와이프 시 윈도우 전체가 끌려 올라가는 현상을 방지합니다.
2. UI/UX 개선안: 모바일 최적화 전략
단순히 리스트를 줄이는 것을 넘어, 모바일 사용성을 극대화하기 위한 구조적 개선안입니다.
모바일 전용 Bottom Sheet (Drawer) 도입:
제안: 모바일 화면 크기에서는 둥둥 떠다니는 Popper 형태의 리스트 대신, 화면 하단에서 올라오는 SwipeableDrawer를 사용하여 옵션을 보여주는 방식을 추천합니다.
이유: 손가락이 닿기 쉬운 하단 영역에 리스트를 고정함으로써 '중단망 스크롤' 문제를 원천적으로 차단하고 훨씬 안정적인 사용감을 제공합니다.
포커스 시 레이아웃 고정:
모바일에서 입력창에 포커스가 되어 키보드가 올라오면 뷰포트가 작아져 스크롤 이슈가 심화됩니다. 이때 Autocomplete 리스트를 전체 화면 혹은 하단 고정형으로 변경하면 중첩 스크롤 문제를 해결할 수 있습니다.
3. 모듈화 및 MUI 7 적용 방향 (사용자 규칙 반영)
로직 및 UI 통합 모듈화: useMobileAutocomplete 같은 커스텀 훅을 만들어 스크롤 제어 로직을 UI 컴포넌트 내부에 포함시킵니다.
Grid 기반 반응형: MUI 7의 Grid2 (또는 최신 Grid)를 사용하여 모바일/데스크탑 레이아웃을 분리하되, Autocomplete 자체가 Grid 아이템으로서 유연하게 크기를 조절하도록 설계합니다.
Prop 전달 최소화: 내부 상태(열림/닫힘)를 컴포넌트 내부에서 관리하고, 외부에서는 선택된 값만 이벤트로 받도록 캡슐화합니다.
요약하자면:
가장 깔끔한 해결책은 "모바일에서는 Autocomplete 리스트를 하단 고정 Bottom Sheet(Drawer)로 전환하고, 내부 스크롤을 3개 아이템 높이로 제한"하는 것입니다. 이렇게 하면 배경 스크롤과 충돌할 일이 없으며 사용자가 훨씬 명확하게 옵션을 선택할 수 있습니다.
현재 Autocomplete.tsx 코드를 분석하여, 위 제안을 코드 수정 없이 바로 적용할 준비가 되셨을 때 말씀해 주세요! 구체적인 구현 방안을 설계해 드리겠습니다.

---------------------------------------
Autocomplete는 입력하는거라 모바일에서 focuse 될때는 키보드가 밑에서 올라오거든 단순 Select라면 너가 제안한 BottomSheet가 나을 수도 있겠지만. 
현재 모달에 있는 Autocompelete라 좀더 다른 방식으로 진행하거나 해야할텐데. 어떻게 생각해?

일리가 있는 말씀입니다. 모바일 환경에서 입력형 Autocomplete는 키보드가 올라오면서 가용한 뷰포트가 급격히 줄어들기 때문에, 일반적인 Select용 Bottom Sheet와는 접근이 달라야 합니다.
모달 내부에 위치한 Autocomplete의 스크롤 중첩 이슈를 해결하기 위한 '입력 중심' 모바일 UI 개선안을 제안합니다.
1. "전체 화면 오버레이" 모드로 전환 (Mobile Full-screen Search)
모바일에서 입력창에 포커스되는 순간, Autocomplete를 포함한 영역이 전체 화면을 덮도록 설계하는 방식입니다.
동작: 사용자가 Autocomplete를 클릭(Focus)하면, 해당 컴포넌트가 모달 위로 전체 화면(Fixed/Absolute)을 덮으며 검색 전용 화면으로 확장됩니다.
장점:
모달과 메인 페이지의 스크롤 간섭을 원천 차단합니다.
키보드가 올라와도 상단 검색창 + 하단 리스트 영역을 최대한 확보할 수 있습니다.
검색 결과가 3개 이상이어도 전체 화면 내에서 자유로운 스크롤이 가능해집니다.
MUI 7 적용: Box나 Fade 컴포넌트를 사용하여 포커스 시 zIndex를 높여 전체 화면을 채우도록 구현합니다.
2. CSS overscroll-behavior 활용 (가장 가벼운 해결책)
현재 겪고 계신 '둥둥 떠다니는 스크롤' 현상은 하위 요소의 스크롤이 끝났을 때 상위 요소로 스크롤 이벤트가 전달(Chaining)되기 때문입니다.
해결책: Autocomplete의 Listbox (옵션 리스트 영역)에 overscroll-behavior: contain; 속성을 적용합니다.
효과: 이 리스트 내에서 아무리 스크롤을 해도 모달이나 메인 페이지가 따라 움직이지 않습니다. 오직 리스트 내부만 스크롤됩니다.
3. 포커스 시 모달 스크롤 고정 및 위치 조정
키보드가 올라오면 모달의 위치가 위로 밀리거나 레이아웃이 깨지는 경우가 많습니다.
개선안:
Autocomplete 리스트가 열릴 때 모달 본체(Modal-content)에 overflow: hidden을 강제로 부여합니다.
동시에 Autocomplete의 Popper 옵션을 조정하여, 리스트가 입력창 아래가 아닌 입력창 위로 뜨게 하거나(공간이 부족할 경우), 아예 모달 내의 특정 위치에 정적(Static)으로 배치되도록 변경합니다. (모바일에서만 disablePortal={true} 설정)
4. 시각적 가이드 및 3개 항목 제한 구현
사용자가 '3개만 보이고 나머지는 스크롤'임을 명확히 인지하게 해야 합니다.
UI 제안:
고정 높이: ListboxProps={{ sx: { maxHeight: '180px' } }} (약 3.5개 항목 높이)를 주어 다음 항목이 잘려 보이게 함으로써 스크롤 가능함을 시각적으로 알립니다.
그라데이션: 리스트 하단에 투명 그라데이션을 살짝 주어 스크롤 영역임을 강조합니다.
결론적으로 추천하는 방향
모바일에서의 최상의 경험은 "포커스 시 검색 오버레이 레이어로 전환"하는 것입니다. 하지만 기존 모달 구조를 유지하면서 문제를 해결해야 한다면, 다음과 같은 하이브리드 방식이 가장 현실적입니다:
CSS: overscroll-behavior: contain으로 스크롤 체이닝 차단.
MUI: disablePortal 옵션을 모바일에서만 true로 설정하여, 리스트가 body가 아닌 모달 내부에 속하게 함 (모달과 함께 움직이도록).
UI: 리스트 높이를 강제(3.5개 분량)하고 모달의 스크롤을 잠금.
어떤 방향이 현재 프로젝트의 설계 의도에 더 부합하시나요? 구체적인 파일 구조와 코드를 바탕으로 로직을 제안해 드릴 수 있습니다. Autocomplete.tsx의 현재 구현 방식을 한 번 확인해 볼까요?